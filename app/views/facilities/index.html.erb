<div
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  <i data-action="click->map#filterButton", class="fa-solid fa-grip-lines filter-btn"></i>

  <div id='map' class="map-large">
  </div>

  <div data-map-target="filtersForm", class="d-none">

    <%= form_with url: facilities_path, method: :get do %>
      <%= label_tag 'Toilet' %>
      <%= check_box_tag 'query', "toilet" %>
      <%= label_tag 'Quiet Place' %>
      <%= check_box_tag 'query', "quiet_place" %>
      <%= label_tag 'Sanitary Products' %>
      <%= check_box_tag 'query', "sanitary_products" %>
      <%= label_tag 'Baby Change' %>
      <%= check_box_tag 'query', "baby_change" %>
      <%= label_tag 'Education' %>
      <%= check_box_tag 'query', "education" %>
      <%= submit_tag "Submit", class: "button", style: "margin-bottom: 10px;" %>
    <% end %>
  </div>
</div>

<script>
  window.setTimeout(() => {
      document.querySelector(".mapboxgl-ctrl-geolocate").click();

    }, 2000);
</script>
